{"ast":null,"code":"import BoardRow from'./BoardRow';import{useState,useEffect,useRef}from'react';import toast,{Toaster}from'react-hot-toast';import{jsx as _jsx}from\"react/jsx-runtime\";function BoardContainer(_ref){let{board,isActiveBoard,setGrid,input,inputRow,dividerRef,isGameOver,setIsGameOver}=_ref;const boardContainer=useRef(null);const intervalRef=useRef();const gridFall=()=>{const gridBodyPos=boardContainer.current.getBoundingClientRect();const currentPos=gridBodyPos.top;boardContainer.current.style.top=currentPos-board.gridFall+\"px\";// moving grid down 5px\ncheckCollision();};const checkCollision=()=>{const gridBodyPos=boardContainer.current.getBoundingClientRect();const dividerPos=dividerRef.current.getBoundingClientRect();if(gridBodyPos.bottom>=dividerPos.top){clearInterval(intervalRef.current);setIsGameOver(true);}};const range=num=>{return[...Array(num).keys()];};useEffect(()=>{clearInterval(intervalRef.current);},[isGameOver]);useEffect(()=>{const intervalId=setInterval(()=>{gridFall();},3500);intervalRef.current=intervalId;return()=>clearInterval(intervalId);},[]);useEffect(()=>{// Grid update\nif(isActiveBoard){const tempRow=range(board.cols).map(idx=>{if(input[idx]){return input[idx];}else{return{letter:\"\",color:\"#FFFFFF\"};}});const newGrid=[...board.grid];newGrid[inputRow]=tempRow;setGrid(newGrid,board.id);}},[input]);return/*#__PURE__*/_jsx(\"div\",{ref:boardContainer,id:\"boardrow-container\",children:range(board.rows).map(index=>{return/*#__PURE__*/_jsx(BoardRow,{input:board.grid[index]});})});}export default BoardContainer;","map":{"version":3,"names":["BoardRow","useState","useEffect","useRef","toast","Toaster","jsx","_jsx","BoardContainer","_ref","board","isActiveBoard","setGrid","input","inputRow","dividerRef","isGameOver","setIsGameOver","boardContainer","intervalRef","gridFall","gridBodyPos","current","getBoundingClientRect","currentPos","top","style","checkCollision","dividerPos","bottom","clearInterval","range","num","Array","keys","intervalId","setInterval","tempRow","cols","map","idx","letter","color","newGrid","grid","id","ref","children","rows","index"],"sources":["C:/Users/daria/OneDrive/Documents/GitHub/wordle-anche/src/BoardContainer.js"],"sourcesContent":["import BoardRow from './BoardRow';\r\nimport { useState, useEffect, useRef } from 'react';\r\nimport toast, {Toaster} from 'react-hot-toast';\r\n\r\nfunction BoardContainer({board, isActiveBoard, setGrid, input, inputRow, dividerRef, isGameOver, setIsGameOver}) {\r\n  const boardContainer = useRef(null);\r\n  const intervalRef = useRef();\r\n\r\n  const gridFall = () => {\r\n    const gridBodyPos = boardContainer.current.getBoundingClientRect();\r\n    const currentPos = gridBodyPos.top;\r\n    boardContainer.current.style.top = (currentPos - board.gridFall) + \"px\"; // moving grid down 5px\r\n    checkCollision();\r\n  }\r\n\r\n  const checkCollision = () => {\r\n    const gridBodyPos = boardContainer.current.getBoundingClientRect();\r\n    const dividerPos = dividerRef.current.getBoundingClientRect();\r\n    if(gridBodyPos.bottom >= dividerPos.top) {\r\n      clearInterval(intervalRef.current);\r\n      setIsGameOver(true);\r\n    }\r\n  }\r\n\r\n  const range = (num) => {\r\n    return [...Array(num).keys()];\r\n  }\r\n\r\n  useEffect(() => {\r\n    clearInterval(intervalRef.current);\r\n  }, [isGameOver])\r\n\r\n  useEffect(() => {\r\n    const intervalId = setInterval(() => {\r\n      gridFall();\r\n    }, 3500);\r\n    intervalRef.current = intervalId;\r\n    return () => clearInterval(intervalId);\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n      // Grid update\r\n    if(isActiveBoard) {\r\n      const tempRow = range(board.cols).map((idx) => {\r\n        if(input[idx]) {\r\n          return input[idx]\r\n        } else {\r\n          return { letter: \"\", color: \"#FFFFFF\"}\r\n        }\r\n      })\r\n      const newGrid = [...board.grid];\r\n      newGrid[inputRow] = tempRow;\r\n      setGrid(newGrid, board.id);\r\n    }\r\n  }, [input])\r\n\r\n  return (\r\n      <div ref={boardContainer} id=\"boardrow-container\">\r\n        {range(board.rows).map((index) => {\r\n          return <BoardRow input={board.grid[index]}/>\r\n        })\r\n      }\r\n      </div>\r\n  )\r\n}\r\n\r\nexport default BoardContainer;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}